# FIR Filter Project (Detailed)

``` 
version 1.0.0 
```
---

This project implements and demonstrates a digital Finite Impulse Response (FIR) filter using both Python and Verilog. It covers the full workflow from generating a noisy input signal, quantizing it for hardware simulation, running a Verilog FIR filter, and visualizing the results.

## Contents

- `input.py`: Generates a noisy sine wave, normalizes and quantizes it to Q1.15 format, and writes it to `input_data.txt`. Plots the original, normalized, and quantized signals.
- `output.py`: Reads the filtered output from `output_data.txt` (Q4.30 format), converts it back to floating point, and plots both the input and filtered output signals.
- `coefficients.py`: Python script to generate FIR filter coefficients in Q1.15 format and write them to `coefficients.txt` for use in Verilog. You can edit the coefficients in this script and rerun it to update the Verilog declarations.
- `fir_filter.v`: Verilog module implementing a 16-tap FIR filter with hardcoded coefficients (Q1.15 format).
- `fir_filter_tb.v`: Verilog testbench that reads `input_data.txt`, applies the samples to the FIR filter, and writes the output to `output_data.txt`.
- `coefficients.txt`: (Optional) FIR filter coefficients in Q1.15 format (not used directly in the provided Verilog, but useful for reference or extension; generated by `coefficients.py`).
- `input_data.txt`: Input samples for the FIR filter (Q1.15 binary, generated by `input.py`).
- `output_data.txt`: Output samples from the FIR filter (Q4.30 binary, generated by the Verilog testbench).
- `output/`: (Optional) Directory for simulation or result files.

## Workflow

1. **Generate Input Data**

   - Run `input.py` to create a noisy, normalized, and quantized input signal.
   - The script prints the random noise factors, saves the binary input data to `input_data.txt`, and displays plots of the signal at each stage.

2. **Generate FIR Coefficients**

   - Edit the coefficients in `coefficients.py` as needed.
   - Run `coefficients.py` to generate or update `coefficients.txt` with the FIR filter coefficients in Q1.15 Verilog declaration format.

3. **Simulate FIR Filter**

   - Use a Verilog simulator (e.g., ModelSim, Icarus Verilog) to run `fir_filter_tb.v`.
   - The testbench reads `input_data.txt`, processes the data through the FIR filter, and writes the filtered output to `output_data.txt` in Q4.30 format.

4. **Analyze Output**
   - Run `output.py` to convert the binary output back to floating point and plot both the input and filtered output signals for comparison.

## Data Formats

- **Q1.15 Format**: 16-bit signed fixed-point, used for input and coefficients. MSB - sign bit, 15-bit - fractional representation.
- **Q4.30 Format**: 36-bit signed fixed-point, used for output. MSB - sign bit, 5-bit integer part, 30-bit fractional part.

## Requirements

- Python 3.x
- `matplotlib` (for plotting)
- Verilog simulator (for running the FIR filter and testbench)

## Usage

1. Install Python dependencies:
   ```bash
   pip install matplotlib
   ```
2. Generate input data:
   ```bash
   python input.py
   ```
3. (Optional) Generate or update FIR coefficients:
   ```bash
   python coefficients.py
   ```
4. Simulate the FIR filter using your preferred Verilog simulator:

   Example with Icarus Verilog:

   ```bash
   iverilog -o fir_output fir_filter.v fir_filter_tb.v
   vvp fir_output
   ```

5. Analyze the output:
   ```bash
   python output.py
   ```

## Output Samples
![Output 1](https://github.com/user-attachments/assets/a7992af0-3ef3-4dda-966c-370de0ee1899)
![Output 2](https://github.com/user-attachments/assets/103d5fbb-9b3f-406e-8d40-5dc1e2bee0a6)


## Customization

- You can modify the signal parameters or noise characteristics in `input.py`.
- To use different FIR coefficients, update them in `coefficients.py` and rerun the script to regenerate `coefficients.txt`. Then update your Verilog code as needed.

## License

This project is for educational and research purposes.
